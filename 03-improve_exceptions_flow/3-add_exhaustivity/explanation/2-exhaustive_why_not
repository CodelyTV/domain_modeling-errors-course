/* eslint-disable no-console,no-case-declarations */

abstract class DomainError extends Error {
	abstract name: string;
	abstract message: string;
}

class UserNameIsEmptyError extends DomainError {
	type = "UserNameIsEmptyError";
	message = "User name is empty";
}

class PostIsDeletedError extends DomainError {
	type = "PostIsDeletedError";
	message = "Post is deleted";
}

class PostIsArchivedError extends DomainError {
	type = "PostIsArchivedError";
	message = "Post is archived";
}

type AllErrors = UserNameIsEmptyError | PostIsDeletedError | PostIsArchivedError;

// type PostErrors = PostIsDeletedError | PostIsArchivedError;

function handleErrors(error: AllErrors): void {
	switch (error.constructor) {
		case UserNameIsEmptyError:
			console.log("UserNameIsEmptyError");
			break;
		case PostIsDeletedError:
			console.log("PostIsDeletedError");
			break;
		case PostIsArchivedError:
			console.log("PostIsArchivedError");
			break;
		default:
			const exhaustiveCheck: never = error;

			return exhaustiveCheck;
	}
}

const error = new UserNameIsEmptyError();

error.constructor = () => {};

handleErrors(error);
